<!DOCTYPE html>
<html lang="is">
  <head>
    <meta charset="utf-8" />
    <title>camera</title>
    <style>
      .freeky {
        filter: drop-shadow(16px 16px 20px red) invert(35%);
      }
      button {
        background-color: red;
        position: absolute;
        padding: 3rem;
      }
    </style>
  </head>

  <body>
    <h1>API sem biður um leyfi fyrir hljóð og mynd</h1>
    <marquee>Máni Eiðsson Skilaverk 10 2022 vefforritun 1</marquee>
    <video></video>
    <button>Breyta Filter</button>
    <script>
      const constraints = { audio: true, video: { width: 1280, height: 720 } };

      navigator.mediaDevices
        .getUserMedia(constraints)
        .then((mediaStream) => {
          const video = document.querySelector("video");
          video.srcObject = mediaStream;
          video.onloadedmetadata = () => {
            video.play();
          };
        })
        .catch((err) => {
          console.error(err);
        });

      document.querySelector("button").addEventListener("click", () => {
        document.querySelector("video").classList.toggle("freeky");
      });
    </script>
  </body>
</html>
